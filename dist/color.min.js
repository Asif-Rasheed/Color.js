/*! Color.js - v0.8.1 - 2012-06-14
* https://github.com/Automattic/Color.js
* Copyright (c) 2012 Matt Wiebe; Licensed GPL v2 */
(function(a){var b=function(a,b){return this._init(a,b),this};b.prototype={_color:0,_alpha:1,_init:function(a,b){if(!a)return this;b=b||"hex";switch(b){case"hex":return this.fromHex(a);case"rgb":return this.fromRgb(a[0],a[1],a[2]);case"hsl":return this.fromHsl(a[0],a[1],a[2]);case"css":return this.fromCSS(a);case"int":return this.fromInt(a)}return this},fromCSS:function(a){var b,c;return a.match(/^(rgb|hsl)a?/)?(c=a.replace(/(\s|%)/g,"").replace(/^(rgb|hsl)a?\(/,"").replace(/\);?$/,"").split(","),c.length===4&&(this._alpha=parseFloat(c.pop())),a.match(/^rgb/)?this.fromRgb(parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)):this.fromHsl(parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10))):this.fromHex(a)},fromRgb:function(a,b,c){return this._color=parseInt((a<<16)+(b<<8)+c,10),this},fromHex:function(a){return a=a.replace(/^#/,""),a.length===3&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),this._color=parseInt(a,16),this},fromHsl:function(a,b,c){var d,e,f,g,h;return a/=360,b/=100,c/=100,b===0?d=e=f=c:(g=c<.5?c*(1+b):c+b-c*b,h=2*c-g,d=this.hue2rgb(h,g,a+1/3),e=this.hue2rgb(h,g,a),f=this.hue2rgb(h,g,a-1/3)),this.fromRgb(d*255,e*255,f*255)},fromInt:function(a){return this._color=parseInt(a,10),this},hue2rgb:function(a,b,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a},toString:function(){var a=parseInt(this._color,10).toString(16);if(a.length<6)for(var b=6-a.length-1;b>=0;b--)a="0"+a;return"#"+a},toCSS:function(a,b){a=a||"hex",b=parseFloat(b||this._alpha);switch(a){case"rgb":case"rgba":var c=this.toRgb();return b<1?"rgba( "+c[0]+", "+c[1]+", "+c[2]+", "+b+" )":"rgb( "+c[0]+", "+c[1]+", "+c[2]+" )";case"hsl":case"hsla":var d=this.toHsl();return b<1?"hsla( "+d[0]+", "+d[1]+", "+d[2]+", "+b+" )":"hsl( "+d[0]+", "+d[1]+", "+d[2]+" )";default:return this.toString()}},toRgb:function(){return[255&this._color>>16,255&this._color>>8,255&this._color]},toHsl:function(){var a=this.toRgb(),b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.max(b,c,d),f=Math.min(b,c,d),g,h,i=(e+f)/2;if(e===f)g=h=0;else{var j=e-f;h=i>.5?j/(2-e-f):j/(e+f);switch(e){case b:g=(c-d)/j+(c<d?6:0);break;case c:g=(d-b)/j+2;break;case d:g=(b-c)/j+4}g/=6}return[Math.round(g*360),Math.round(h*100),Math.round(i*100)]},toInt:function(){return this._color},toIEOctoHex:function(){var a=this.toString(),b=parseInt(255*this._alpha,10).toString(16);return b.length===1&&(b="0"+b),"#"+b+a.replace(/^#/,"")},toLuminosity:function(){var a=this.toRgb();return.2126*Math.pow(a[0]/255,2.2)+.7152*Math.pow(a[1]/255,2.2)+.0722*Math.pow(a[2]/255,2.2)},getDistanceLuminosityFrom:function(a){if(a instanceof b){var c=this.toLuminosity(),d=a.toLuminosity();return c>d?(c+.05)/(d+.05):(d+.05)/(c+.05)}throw"getDistanceLuminosityFrom requires a Color object"},getMaxContrastColor:function(){var a=this.toLuminosity(),c=a>=.5?"000000":"ffffff";return new b(c)},getGrayscaleContrastingColor:function(a){if(!a)return this.getMaxContrastColor();var b=a<5?5:a,c=this.getMaxContrastColor();a=c.getDistanceLuminosityFrom(this);if(a<=b)return c;var d="#000000"===c.toString()?1:-1;while(a>b)c=c.incrementLightness(d),a=c.getDistanceLuminosityFrom(this);return c},darken:function(a){return a=a||5,this.incrementLightness(-a)},lighten:function(a){return a=a||5,this.incrementLightness(a)},incrementLightness:function(a){var b=this.toHsl();return b[2]+=a,b[2]<0&&(b[2]=0),b[2]>100&&(b[2]=100),this.fromHsl(b[0],b[1],b[2])},saturate:function(a){return a=a||15,this.incrementSaturation(a)},desaturate:function(a){return a=a||15,this.incrementSaturation(-a)},incrementSaturation:function(a){var b=this.toHsl();return b[0]+=a,b[0]<0&&(b[0]=0),b[0]>100&&(b[0]=100),this.fromHsl(b[0],b[1],b[2])},toGrayscale:function(){var a=this.toHsl();return a[1]=0,this.fromHsl(a[0],a[1],a[2])},getComplement:function(){return this.incrementHue(180)},getSplitComplement:function(a){a=a||1;var b=180+a*30;return this.incrementHue(b)},getAnalog:function(a){a=a||1;var b=a*30;return this.incrementHue(b)},getTetrad:function(a){a=a||1;var b=a*60;return this.incrementHue(b)},getTriad:function(a){a=a||1;var b=a*120;return this.incrementHue(b)},incrementHue:function(a){var b=this.toHsl();return b[0]=(b[0]+a)%360,this.fromHsl(b[0],b[1],b[2])}},a.Color=b})(typeof exports=="object"&&exports||this);